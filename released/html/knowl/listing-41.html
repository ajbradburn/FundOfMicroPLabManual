<!DOCTYPE html>
<html lang="en-US">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*       on 2022-04-18T08:10:08-04:00       *-->
<!--*   A recent stable commit (2020-08-09):   *-->
<!--* 98f21740783f166a773df4dc83cab5293ab63a4a *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math">
<figure class="listing figure-like"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><pre class="program"><code class="language-none">118|  button_pin = 25
119|
120|  # Upon Ctrl-C, exit the application
121|  def signal_handler(sig, frame):
122|    global led_display
123|    del led_display
124|    sys.exit(0)
125|
126|  def roll_dice(channel):
127|    led_display.interlude()
128|    roll = random.randint(1, 6)
129|    text = "Rolled a {}.".format(roll)
130|    oled_display.display_string(text)
131|    led_display.display(roll)
132|    print("New roll of: {}.".format(roll))
133|
134|  # Start monitoring for, and responding to, a button press.
135|  def start(button_pin, led_display, oled_display):
136|    GPIO.setup(button_pin, GPIO.IN, pull_up_down=GPIO.PUD_UP)
137|    # Monitor the button pin, and when it is pressed for 100ms, call the function roll_dice.
138|    GPIO.add_event_detect(button_pin, GPIO.FALLING, callback=roll_dice, bouncetime=100)
139|    signal.signal(signal.SIGINT, signal_handler)
140|    signal.pause()
141|
142|  led_display = led_display()
143|  oled_display = oled_display()
144|  start(button_pin, led_display, oled_display)
</code></pre></div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">9.2.9<span class="period">.</span></span><span class="space"> </span></figcaption></figure><span class="incontext"><a href="section-37.html#listing-41" class="internal">in-context</a></span>
</body>
</html>
