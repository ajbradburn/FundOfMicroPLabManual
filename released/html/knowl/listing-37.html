<!DOCTYPE html>
<html lang="en-US">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*       on 2022-04-12T09:19:04-04:00       *-->
<!--*   A recent stable commit (2020-08-09):   *-->
<!--* 98f21740783f166a773df4dc83cab5293ab63a4a *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math">
<figure class="listing figure-like"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><pre class="program"><code class="language-none">44|    # An animation to indicate something is happening.
45|    def interlude(self):
46|      # Clear all of the LEDs quickly.
47|      for l in self.lp:
48|        GPIO.output(l, 0)
49|      sleep(0.100)
50|      # Turn on each LED with a small pause between each.
51|      for l in self.lp:
52|        GPIO.output(l, 1)
53|        sleep(0.020)
54|      # Turn off each LED with a small pause between each.
55|      for l in self.lp:
56|        GPIO.output(l, 0)
57|        sleep(0.020)
58|
59|  button_pin = 25
60|
61|  # Upon Ctrl-C, exit the application.
62|  def signal_handler(sig, frame):
63|    global led_display
64|    del led_display
65|    sys.exit(0)
66|
67|  def roll_dice(channel):
68|    led_display.interlude()
69|    roll = random.randint(1, 6)
70|    led_display.display(roll)
71|    print("New roll of: {}.".format(roll))
72|
73|  # Start monitoring for, and responding to, a button press.
74|  def start(button_pin, led_display):
75|    GPIO.setup(button_pin, GPIO.IN, pull_up_down=GPIO.PUD_UP)
76|    # Monitor the button pin, and when it is pressed for 100ms, call the function roll_dice.
77|    GPIO.add_event_detect(button_pin, GPIO.FALLING, callback=roll_dice, bouncetime=100)
78|    signal.signal(signal.SIGINT, signal_handler)
79|    signal.pause()
80|
81|  led_display = led_display()
82|  start(button_pin, led_display)
</code></pre></div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">8.2.9<span class="period">.</span></span><span class="space"> </span></figcaption></figure><span class="incontext"><a href="section-34.html#listing-37">in-context</a></span>
</body>
</html>
